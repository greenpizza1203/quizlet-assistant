(()=>{"use strict";var e={144:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestFuzzy=void 0;const r=n(593),a=n(469),o=n(912);console.log("injecting content script");let s=async function(){await a.createElement();let e=new Blob([await r.fetchString("worker.js")],{type:"application/javascript"}),t=new Worker(URL.createObjectURL(e));return t.onmessage=i,t}();function i({data:e}){if(l=!1,c){let e=c;c=null,d(e)}a.renderCards(e)}chrome.runtime.onMessage.addListener(((e,t,n)=>{!async function({ids:e,search:t}){const n=await o.storage.getAsync(e);(await s).postMessage({sets:n,fuzzy:t})}(e),n(!0)}));let c,l=!1;async function d(e){l?c=e:(l=!0,(await s).postMessage(e))}t.requestFuzzy=d},469:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderCards=t.updateSelection=t.createElement=t.cards=t.parent=void 0;const r=n(593),a=n(144);let o;function s(e){e&&(t.parent.style.left=e.x+40+"px",t.parent.style.top=e.y+30+"px");let n=window.getSelection().toString()||function(e){if(!e)return;const t=document.elementFromPoint(e.clientX,e.clientY),n=t?.tagName;return"P"===n||"SPAN"===n||"PRE"===n?t?.innerText:void 0}(e)||o;n=n?.trim(),o!==n&&(o=n,o?(t.parent.classList.remove("outerFade"),a.requestFuzzy(o)):t.parent.classList.add("outerFade"))}t.cards=[],t.createElement=async function(){t.parent=document.body.appendChild(document.createElement("div")),t.parent.classList.add("limeLightParent","fade");const e=await r.fetchString("mouseover.html");for(let n=0;n<3;n++){const n=document.createElement("div");n.innerHTML=e;let r=n.firstElementChild;const a=r;t.parent.appendChild(r),t.cards.push(a)}},document.onmousemove=e=>{t.parent.style.left=e.x+40+"px",t.parent.style.top=e.y+30+"px",s(e)},t.updateSelection=s,t.renderCards=function(e){e.length?(t.cards.forEach(((t,n)=>{const r=e[n],a=t.firstElementChild,o=t.lastElementChild;r?(t.style.opacity="1",a.innerText=r.front,o.innerText=r.back):(t.style.opacity="0",a.innerText="",o.innerText="")})),t.parent.classList.remove("fade")):t.parent.classList.add("fade")}},912:(e,t)=>{function n(e){return new Promise((t=>chrome.storage.local.get(e,t)))}Object.defineProperty(t,"__esModule",{value:!0}),t.storage=t.storeSet=t.findNewId=void 0,t.findNewId=async function(e){let t=await n(e);return e.find((e=>!t[e]))},t.storeSet=function(e,t){return n={[e]:t},new Promise((e=>chrome.storage.local.set(n,e)));var n},t.storage={getAsync:n}},593:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchString=void 0,t.fetchString=async function(e){const t=chrome.runtime.getURL(e);return(await fetch(t)).text()}}},t={};!function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}(144)})();