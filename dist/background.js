(()=>{"use strict";var e={136:(e,t,r)=>{const n=r(161),s=r(912);chrome.runtime.onInstalled.addListener((function(){chrome.contextMenus.create({title:"Search flashcards",id:"search",contexts:["selection"]})})),chrome.contextMenus.onClicked.addListener((async function(e,t){const r=e.selectionText.trim();if(!r)return;let i=await n.getIds(r),o=await s.findNewId(i);o&&await s.storeSet(o,await n.scrapeSet(o)),function(e,t){chrome.tabs.sendMessage(t.id,e,(async r=>{if(chrome.runtime.lastError?.message,r)return;const n={tabId:t.id};chrome.scripting.insertCSS({files:["mouseover.css"],target:n}),chrome.scripting.executeScript({files:["content.js"],target:n},(()=>chrome.tabs.sendMessage(t.id,e)))}))}({ids:i,search:r},t)}))},161:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.scrapeSet=t.getIds=t.getId=void 0;const n=r(394);function s(e){let t=new URL(e).pathname.split("/").find((e=>(+e).toString()==e));return t||console.warn("unable to process quizlet url"+e),t}t.getId=s,t.getIds=async function(e){return(await n.searchQuizlet(e)).map((e=>s(e.link))).filter((e=>e))},t.scrapeSet=async function(e,t=!0){if(console.log(`scraping quizlet set #${e}`),!t)return;const r=await fetch("https://quizlet.com/webapi/3.2/terms?%5BisPublished%5D=true&filters%5BsetId%5D="+e);return(await r.json()).responses[0].models.term.filter((e=>!e.isDeleted)).map((({word:e,definition:t})=>({word:e,definition:t})))}},394:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.searchQuizlet=void 0,t.searchQuizlet=function(e){return async function(e){return(await async function({url:e,...t}){return(await fetch(`${e}?${new URLSearchParams(t)}`)).json()}({url:"https://serpapi.com/search",q:`site:quizlet.com ${e}`,api_key:"fe68d706a01dcb6804e5081d28982113d18c7e208b78c681fa66a699c884c06a",engine:"google"})).organic_results}(e)}},912:(e,t)=>{function r(e){return new Promise((t=>chrome.storage.local.get(e,t)))}Object.defineProperty(t,"__esModule",{value:!0}),t.storage=t.storeSet=t.findNewId=void 0,t.findNewId=async function(e){let t=await r(e);return e.find((e=>!t[e]))},t.storeSet=function(e,t){return r={[e]:t},new Promise((e=>chrome.storage.local.set(r,e)));var r},t.storage={getAsync:r}}},t={};!function r(n){if(t[n])return t[n].exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}(136)})();